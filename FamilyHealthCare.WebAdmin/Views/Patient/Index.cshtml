@using Contract.DTOs.ManagementService;
@model IEnumerable<PatientDetailsDto>;
@{
    var patientCount = 1;
    ViewData["breadcumb-title"] = "Patients";
}
<div class="row">
    <div class="col-sm-12">
        <div class="card">
            <div class="card-body">
                <div class="table-responsive">
                    <div class="table-responsive">
                        <table class="datatable table table-hover table-center mb-0">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Patient Name</th>
                                    <th>Age</th>
                                    <th>Address</th>
                                    <th>Phone</th>
                                    <th>Gender</th>
                                    <th class="text-end">Account Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var patient in Model)
                                {
                                    <tr>
                                        <td>@(patientCount++)</td>
                                        <td>
                                            <h2 class="table-avatar">
                                                <a asp-controller="Patient" asp-action="DetailsPatient" class="avatar avatar-sm me-2"><img class="avatar-img rounded-circle" src=@Url.Content("~/assets/img/patients/patient1.jpg") alt="User Image"></a>
                                                <a asp-controller="Patient" asp-action="DetailsPatient" asp-route-id="@patient.AccountId">@patient.FullName </a>
                                            </h2>
                                        </td>
                                        @if (patient.DateOfBirth == DateTime.MinValue)
                                        {
                                            <td>N/A</td>
                                        }
                                        else if (patient.DateOfBirth != DateTime.MinValue)
                                        {

                                            <td>
                                                @(DateTime.Now.Year - patient.DateOfBirth.Year)
                                            </td>
                                        }
                                        @if (patient.Address == null)
                                        {
                                            <td>N/A</td>
                                        }
                                        else if (patient.Address != null)
                                        {
                                            <td>@patient.Address</td>
                                        }
                                        @if (patient.Phone == null)
                                        {

                                            <td>N/A</td>
                                        }
                                        else if (patient.Phone != null)
                                        {

                                            <td>@patient.Phone</td>
                                        }
                                        @if (patient.Gender == 1)
                                        {
                                            <td>Male</td>
                                        }
                                        else if (patient.Gender == 2)
                                        {
                                            <td>Female</td>
                                        }
                                        else if (patient.Gender == null)
                                        {

                                            <td>N/A</td>
                                        }
                                        <td>
                                            <div class="status-toggle">
                                                @if (patient.IsActive == true)
                                                {
                                                    <input type="checkbox" data-accountId="@patient.AccountId" data-IsActive="@patient.IsActive" id="status_@patientCount" class="check" checked>
                                                }
                                                else
                                                {
                                                    <input type="checkbox" data-accountId="@patient.AccountId" data-IsActive="@patient.IsActive" id="status_@patientCount" class="check">
                                                }
                                                <label for="status_@patientCount" class="checktoggle">checkbox</label>
                                            </div>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts{
    <script src="~/js/ChangeStatusAccount.js"></script>
}